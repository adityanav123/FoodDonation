{% extends 'base_with_home.html' %}
{% load crispy_forms_tags %}


{% block title %} {{user.username}} / Messages {% endblock %}

{% block navigation %}
<div class = "row">
	<div class = "col">
		<form method = "post" action = "{% url 'homePage' %}">
		{% csrf_token %}
		<button class="btn btn-outline-dark" style="font-size:22px"><i class="fa fa-home"> Home</i></button>
	</form>
</div>
	<div class = "col">
				<form method = "get" action = "{% url 'edit_profile' %}">
					<!-- <strong> Update Profile</strong> -->

					<button type = "submit" class = "btn btn-outline-dark navbar-btn"> <strong> Update Profile </strong></button>
				</form>
			</div>
		</div>
{% endblock %}

{% block content %}
	<table class = "table">
			<thead>
				<tr>
 					<th scope="col">  Username  </th>
 					<th scope="col"> Location </th>
 					<th scope="col"> Contact No. </th>
					<th scope="col">    </th>
					<th scope = "col">Status</th>
					<th scope="col"> Action </th>
				</tr>
			</thead>
			<tbody>
		{% for i in messages %}
			<tr>
				<th scope="row">{{ i.sender.username }}</th>
				<th scope="row">{{ i.sender.locality }}, {{ i.sender.city }} </th>
				<th scope="row">{{ i.sender.contact_no }} </th>
				<th scope="row"> <small> <strong> {{ i.message }} </strong> </small></th>
				<th scope = "row">
					{% if i.read_unread == False %}
						Unread
					{% else %}
						Read
					{% endif %}
				</th>
				<th scope = "row"> 
					<div class = "row">
					<div class = "col">
					<form method = "post" action="{% url 'deleteNotification' i.pk %}"> {%csrf_token%}
						<button class = "btn btn-outline-success" style="font-size:11px"><i class="material-icons" style="font-size:15px">eject</i> Delete</button>
					</form>
				</div>
				<div class = "col">
					<form method = "post" action="{% url 'readMessage' i.pk %}">{%csrf_token%}
						<button class = "btn btn-outline-success" style="font-size:11px"><i class="material-icons" style="font-size:15px">offline_pin</i> Read</button>
					</form>
				</div>
			</div>
				</th>	

			</tr>
		{% endfor %}
	
{% endblock %}